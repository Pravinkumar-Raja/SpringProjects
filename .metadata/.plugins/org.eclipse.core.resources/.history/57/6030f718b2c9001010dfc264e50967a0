package com.example.demo.controller;

import java.util.ArrayList;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;

import com.example.demo.bean.DoctorBean;
import com.example.demo.bean.PatientBean;
import com.example.demo.service.DoctorService;

@Controller
@RequestMapping("/admin")
public class AdminController {

    @Autowired
    private DoctorService doctorService;

    @GetMapping("/welcome")
    public String welcomeMessage() {
        return "<hr><h2><marquee directions='right'>Welcome to Spring Boot Application</marquee></h2><hr>";
    }

    @GetMapping("/data")
    public ArrayList<String> getData() {
        ArrayList<String> data = new ArrayList<>();
        data.add("Pk");
        data.add("Pravin");
        data.add("Kumar");
        data.add("Puducherry");
        return data;
    }

    @GetMapping("/login")
    public ModelAndView loginPage() {
        return new ModelAndView("Login");
    }

    @PostMapping("/validate")
    public ModelAndView validateLogin(@RequestParam("user") String user, @RequestParam("pass") String pass) {
        if (user.equals("Pravin") && pass.equals("Pk@1234")) {
            return new ModelAndView("redirect:/login2");
        } else if (user.equals("Pravin") && pass.equals("Pa1234")) {
            return new ModelAndView("AddPatient");
        } else {
            return new ModelAndView("Invalid");
        }
    }

    @PostMapping("/addDoctor")
    public String addDoctor(@ModelAttribute("db") DoctorBean doctorBean) {
        int result = doctorService.addDoctor(doctorBean);
        return "<h1>" + result + " Doctor Details Added Successfully</h1>";
    }

    @PostMapping("/addPatient")
    public String addPatient(@ModelAttribute("pb") PatientBean patientBean) {
        // Assuming you have a service to handle patient addition
        return "<h1>Patient Added Successfully</h1>";
    }

    @GetMapping("/login2")
    public ModelAndView loginPage2() {
        return new ModelAndView("Login");
    }
}
